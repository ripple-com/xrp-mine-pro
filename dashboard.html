<!doctypehtml><html lang=en><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Premium XRP Cloud Mining Platform - User Dashboard</title><link rel=icon type=image/x-icon href=favicon.ico><link rel=icon type=image/png href=favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=favicon-16x16.png sizes=16x16><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap"rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css><style>body{font-family:Inter,sans-serif;margin:0;padding:0;background-color:#121212;color:#eee;line-height:1.6}:root{--primary-color:#03a9f4;--secondary-color:#ff9800;--accent-color:#4CAF50;--card-bg:#212121;--border-color:#333333;--menu-width:280px;--referral-bg:#1a1a1a;--bronze-color:#03a9f4;--silver-color:#f44336}a{color:var(--primary-color);text-decoration:none;transition:color .3s,transform .2s}a:hover{color:#81d4fa}button{cursor:pointer;border:none;transition:background-color .3s,box-shadow .3s,transform .2s;color:#fff}header{background-color:#121212;padding:15px 5%;display:flex;justify-content:space-between;align-items:center;border-bottom:3px solid var(--secondary-color);box-shadow:0 4px 15px rgba(0,0,0,.4);position:sticky;top:0;z-index:900}.logo{font-size:1.8em;font-weight:800;color:var(--secondary-color)}nav a{margin-left:35px;font-weight:600;font-size:1em;color:#bbb}nav a:hover{color:var(--primary-color)}.user-auth-area{display:flex;align-items:center}.user-info{font-size:.9em;margin-right:20px;font-weight:600}.logout-btn{background-color:#f44336;padding:10px 25px;border-radius:8px;font-weight:600;box-shadow:0 4px 10px rgba(244,67,54,.3)}.logout-btn:hover{background-color:#d32f2f;transform:translateY(-1px)}.hero{background:linear-gradient(135deg,#121212 0,#0a0a0a 100%);padding:50px 5% 30px;text-align:center;min-height:auto}.hero h1{color:#fff;font-size:3em;margin-bottom:10px;font-weight:800;text-shadow:0 4px 10px rgba(255,152,0,.3)}.hero p{font-size:1.2em;margin-bottom:0;color:#bdbdbd}.faq,.plans,.referral,.stats{padding:40px 5%;text-align:center}.referral{background-color:#1a1a1a}h2{color:var(--primary-color);font-size:2.5em;font-weight:700;margin-bottom:30px}.stat-container{display:flex;justify-content:center;gap:30px;flex-wrap:wrap}.stat-box{flex-basis:300px;background-color:var(--card-bg);border-radius:12px;padding:30px;text-align:left;border:1px solid var(--border-color);box-shadow:0 6px 15px rgba(0,0,0,.4);transition:all .3s}.stat-box:hover{transform:translateY(-5px);box-shadow:0 10px 25px rgba(0,0,0,.6)}.stat-box h3{color:#bbb;font-size:1.1em;font-weight:400;margin-bottom:5px}.stat-box .value{font-size:3em;color:var(--secondary-color);font-weight:800;margin-top:5px}.plan-container{display:flex;justify-content:center;gap:30px;flex-wrap:wrap}.plan-card{background-color:#2c2c2c;border-radius:15px;padding:40px 30px;width:320px;box-shadow:0 8px 25px rgba(0,0,0,.5);border:2px solid #424242;transition:transform .3s,box-shadow .3s;position:relative}.plan-card:hover{transform:scale(1.03);box-shadow:0 15px 40px rgba(0,0,0,.7)}.plan-card.gold-highlight{border:3px solid var(--secondary-color);background:linear-gradient(145deg,#2c2c2c,#3a3a3a);box-shadow:0 10px 40px rgba(255,152,0,.4)}.plan-card.bronze-highlight{border:3px solid var(--bronze-color);background:linear-gradient(145deg,#2c2c2c,#263238);box-shadow:0 10px 40px rgba(3,169,244,.4)}.plan-card.silver-highlight{border:3px solid var(--silver-color);background:linear-gradient(145deg,#2c2c2c,#3e2723);box-shadow:0 10px 40px rgba(244,67,54,.4)}.plan-card.free-plan{border:3px solid var(--accent-color);background:linear-gradient(145deg,#1f2b1f,#2c382c);box-shadow:0 10px 40px rgba(76,175,80,.4);order:-1}.activated-badge{position:absolute;top:15px;right:15px;color:#fff;padding:5px 12px;border-radius:5px;font-weight:700;font-size:.9em;box-shadow:0 2px 5px rgba(0,0,0,.5);z-index:10;background-color:var(--accent-color)}.plan-card.gold-highlight .activated-badge{background-color:var(--secondary-color)}.plan-card.silver-highlight .activated-badge{background-color:var(--silver-color)}.plan-card.bronze-highlight .activated-badge{background-color:var(--bronze-color)}.plan-card h3{color:var(--primary-color);font-size:2em;margin-bottom:25px;font-weight:700}.plan-card.free-plan h3{color:var(--accent-color)}.plan-card p{font-size:1.1em;margin:12px 0;color:#ccc}.plan-card button{background-color:var(--secondary-color);padding:14px 40px;border-radius:30px;font-size:1.1em;font-weight:600;margin-top:20px;box-shadow:0 4px 10px rgba(255,152,0,.4)}.plan-card.free-plan button{background-color:var(--accent-color);box-shadow:0 4px 10px rgba(76,175,80,.4)}.faq{background-color:#1a1a1a}.qa-item{background-color:var(--card-bg);max-width:900px;margin:20px auto;padding:25px;border-radius:8px;text-align:left;border-left:4px solid var(--accent-color);box-shadow:0 2px 8px rgba(0,0,0,.3)}.qa-item h4{color:var(--primary-color);font-size:1.3em;font-weight:600}.referral-box{background-color:var(--referral-bg);max-width:700px;margin:0 auto;padding:40px;border-radius:15px;border:2px dashed var(--accent-color);box-shadow:0 0 20px rgba(76,175,80,.3)}.referral-box h3{color:var(--accent-color);font-size:1.8em;margin-bottom:10px}.referral-box p{color:#ccc;margin-bottom:30px}.link-container{display:flex;gap:10px;margin-bottom:20px}#referralLink{flex-grow:1;padding:15px;border-radius:8px;border:1px solid var(--border-color);background-color:var(--card-bg);color:var(--primary-color);font-size:1em;font-family:monospace}.copy-btn{background-color:var(--accent-color);padding:15px 25px;border-radius:8px;font-weight:600}.copy-btn:hover{background-color:#388e3c;transform:translateY(-1px)}#copy-feedback{color:var(--secondary-color);font-weight:600;margin-top:15px;display:none}footer{background-color:#000;color:#9e9e9e;padding:35px 0;font-size:.9em;border-top:1px solid var(--border-color)}.side-menu{height:100%;width:0;position:fixed;z-index:1000;top:0;right:0;background-color:#2c2c2c;overflow-x:hidden;padding-top:70px;transition:width .5s;box-shadow:-5px 0 15px rgba(0,0,0,.4)}.side-menu h2{font-size:1.5em;margin:0 25px 30px;color:var(--secondary-color);text-align:left;border-bottom:1px solid #424242;padding-bottom:10px}.side-menu.open{width:var(--menu-width)}.side-menu a{padding:15px 25px;font-size:1em;color:#bbb;display:block;border-bottom:1px solid #333}.side-menu a:hover{background-color:#3a3a3a;color:var(--primary-color)}.side-menu a i{margin-right:15px;color:var(--secondary-color)}.side-menu .close-btn{position:absolute;top:15px;right:25px;font-size:36px;color:#eee;cursor:pointer;background:0 0;border:none}.side-menu .logout-btn-side{background-color:#f44336;margin:20px auto;display:block;text-align:center;padding:10px 0;border-radius:8px;width:80%}.open-btn{position:fixed;top:20px;right:20px;font-size:1.1em;background-color:var(--secondary-color);color:#fff;border:none;padding:10px 12px;cursor:pointer;z-index:1001;border-radius:5px;display:none}.telegram-support-btn{position:fixed;top:85vh;left:80vw;cursor:grab;z-index:999;background-color:#08c;color:#fff;width:60px;height:60px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:2em;box-shadow:0 4px 15px rgba(0,0,0,.4),0 0 0 3px rgba(0,136,204,.5);transition:background-color .3s,box-shadow .3s;text-decoration:none}.telegram-support-btn:hover{background-color:#0af;box-shadow:0 6px 20px rgba(0,0,0,.6),0 0 0 5px rgba(0,170,255,.7)}.telegram-support-btn.dragging{cursor:grabbing}@media (min-width:1px){.user-auth-area,nav{display:none!important}.open-btn{position:absolute;display:block!important}header{flex-direction:column;padding:15px;text-align:center;justify-content:flex-start;align-items:flex-start;padding-right:80px}.logo{margin-right:auto}}@media (max-width:768px){.hero h1{font-size:3em}.hero p{font-size:1.2em}.plan-card,.stat-box{width:90%}.plan-container,.stat-container{flex-direction:column;align-items:center;gap:20px}.faq,.plans,.referral,.stats{padding:40px 5%}.link-container{flex-direction:column}.copy-btn{width:100%}.user-info{display:none!important}.telegram-support-btn{width:50px;height:50px;font-size:1.8em;top:85vh;left:70vw}}</style><button class=open-btn onclick=toggleNav()><i class="fas fa-bars"></i></button><div id=mySideMenu class=side-menu><button class=close-btn onclick=toggleNav()>×</button><h2>Welcome,<span id=side-user-display-name>Loading...</span></h2><a href=#dashboard><i class="fas fa-chart-line"></i>Mining Stats</a><a href=#plans><i class="fas fa-shopping-cart"></i>Buy Hash Rate</a><a href=withdrawal.html><i class="fas fa-wallet"></i>Withdraw XRP</a><a href=transactions.html><i class="fas fa-history"></i>Transaction History</a><a href=#referral><i class="fas fa-users"></i>Referral Program</a><a href=faq.html><i class="fas fa-question-circle"></i>FAQ</a><a href=about.html><i class="fas fa-info-circle"></i>About Us</a><button onclick=logout() class=logout-btn-side><i class="fas fa-sign-out-alt"></i>Log Out</button></div><header><div class=logo>XRP MINE PRO</div><nav><a href=#dashboard>Dashboard</a><a href=#plans>Plans</a><a href=#referral>Referral</a><a href=#faq>FAQ</a><a href=#contact>Contact</a></nav><div class=user-auth-area><span class=user-info>Welcome,<span id=header-user-display-name style=color:var(--primary-color)>Loading...</span></span><button class=logout-btn onclick=logout()>Log Out</button></div></header><section class=hero><h1>Welcome Back,<span id=hero-user-display-name style=color:var(--secondary-color)>Miner</span>!</h1><p>Your personalized mining dashboard is ready.</section><section id=dashboard class=stats><h2>YOUR MINING METRICS</h2><div class=stat-container><div class=stat-box><h3><i class="fas fa-coins"></i>Current XRP Balance</h3><p class=value id=current-balance>0.0000 XRP</div><div class=stat-box><h3><i class="fas fa-tachometer-alt"></i>Total Hash Rate</h3><p class=value id=total-hash-rate>0.00 MH/s</div><div class=stat-box><h3><i class="fas fa-dollar-sign"></i>Estimated Daily Income</h3><p class=value id=estimated-daily-income>$0.00</div></div></section><section id=plans class=plans><h2>SELECT YOUR CONTRACT</h2><div class=plan-container><div class="plan-card free-plan"id=free-plan-card><h3><i class="fas fa-gift"></i>FREE STARTER (Trial)</h3><p id=free-hash-rate>Loading Hash Rate...<p id=free-price>Loading Price...<p id=free-duration>Loading Duration...<p id=free-earning style=font-size:.9em;color:#ff9800;font-weight:600>Loading Earning...</p><button id=free-plan-btn onclick=activateFreePlan()>ACTIVATE FREE PLAN<i class="fas fa-rocket"></i></button></div><div class="plan-card bronze-highlight"><h3>BRONZE (1 Months)</h3><p id=bronze-hash-rate>Loading Hash Rate...<p id=bronze-price>Loading Price...<p id=bronze-duration>Loading Duration...<p id=bronze-earning style=font-size:.9em;color:var(--secondary-color);font-weight:600>Loading Earning...</p><button onclick='goToPayment("bronze")'>PURCHASE<i class="fas fa-bolt"></i></button></div><div class="plan-card silver-highlight"><h3>SILVER (1 Months)</h3><p id=silver-hash-rate>Loading Hash Rate...<p id=silver-price>Loading Price...<p id=silver-duration>Loading Duration...<p id=silver-earning style=font-size:.9em;color:var(--secondary-color);font-weight:600>Loading Earning...</p><button onclick='goToPayment("silver")'>PURCHASE<i class="fas fa-bolt"></i></button></div><div class="plan-card gold-highlight"><h3>ELITE GOLD (1 Months)</h3><p id=gold-hash-rate>Loading Hash Rate...<p id=gold-price>Loading Price...<p id=gold-duration>Loading Duration...<p id=gold-earning style=font-size:.9em;color:var(--secondary-color);font-weight:600>Loading Earning...</p><button onclick='goToPayment("gold")'>PURCHASE<i class="fas fa-fire"></i></button></div></div></section><section id=referral class=referral><h2>REFERRAL PROGRAM</h2><div class=referral-box><h3><i class="fas fa-handshake"></i>Invite & Earn (<span id=total-referrals>0</span>Total Referrals)</h3><p>Share your unique link and earn **10% commission** on every plan purchase made by your referrals!<div class=link-container><input id=referralLink value="Loading your unique referral link..."readonly><button class=copy-btn onclick=copyReferralLink()><i class="fas fa-copy"></i>Copy Link</button></div><div id=copy-feedback>Link Copied!</div></div></section><a href=https://t.me/XRP_Mine_Pro_Support target=_blank class=telegram-support-btn id=telegram-btn title="Telegram Support"><i class="fab fa-telegram-plane"></i></a><footer id=contact><p>Contact Us: xrpmineprohelp@gmail.com<p>© 2025 XRP Mine Pro. High-Contrast Solutions.</footer><script src=https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js></script><script src=https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js></script><script src=https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js></script><script>const firebaseConfig={apiKey:"AIzaSyBsTIzaJtaGiAfv4a69o80f0QvKiq6lFj4",authDomain:"xrp-mine-pro.firebaseapp.com",projectId:"xrp-mine-pro",storageBucket:"xrp-mine-pro.appspot.com",messagingSenderId:"1234567890",appId:"1:1234567890:web:abcdef123456"};firebase.initializeApp(firebaseConfig);const auth=firebase.auth(),db=firebase.firestore();let miningInterval,isFreePlanActive=!1,totalHashRate=0,ALL_PLANS_DATA={};const FREE_PLAN_HASH_RATE_DEFAULT=10,FREE_PLAN_EXPIRY_DAYS_DEFAULT=15,DEFAULT_DAILY_INCOME_PER_MH=.05,XRP_RATE_PER_SECOND_PER_MH=11574e-10,MINING_UPDATE_INTERVAL=1e4;let currentLocalBalance=0,isMiningOnline=!1;async function calculateAndApplyMining(e,t){const n=t.totalHashRate||0,a=t.lastMiningUpdate?t.lastMiningUpdate.toDate():null;if(n<=0||!a)return;const i=((new Date).getTime()-a.getTime())/1e3,o=n*i*XRP_RATE_PER_SECOND_PER_MH;if(o>1e-6)try{await db.runTransaction((async n=>{const a=await n.get(e);if(!a.exists)return;const r=(a.data().balance||0)+o;n.update(e,{balance:r,lastMiningUpdate:firebase.firestore.FieldValue.serverTimestamp()}),t.balance=r,document.getElementById("current-balance").textContent=r.toFixed(4)+" XRP",console.log(`✅ Offline Mining Applied. +${o.toFixed(4)} XRP earned over ${i.toFixed(0)} seconds.`)}))}catch(e){console.error("Offline Mining Calculation Failed:",e)}}function startRealTimeSimulation(){if(isMiningOnline||totalHashRate<=0)return;const e=totalHashRate*XRP_RATE_PER_SECOND_PER_MH*(MINING_UPDATE_INTERVAL/1e3);miningInterval&&clearInterval(miningInterval),isMiningOnline=!0,miningInterval=setInterval((()=>{currentLocalBalance+=e,document.getElementById("current-balance").textContent=currentLocalBalance.toFixed(4)+" XRP"}),MINING_UPDATE_INTERVAL)}function stopRealTimeSimulation(){miningInterval&&(clearInterval(miningInterval),miningInterval=null),isMiningOnline=!1}function updateFreePlanUI(){document.getElementById("free-plan-card");const e=document.getElementById("free-plan-btn");isFreePlanActive?(e.disabled=!0,e.textContent="PLAN ACTIVATED",e.style.backgroundColor="#555",e.style.boxShadow="none"):(e.disabled=!1,e.textContent="ACTIVATE FREE PLAN",e.style.backgroundColor="var(--accent-color)",e.style.boxShadow="0 4px 10px rgba(76, 175, 80, 0.4)")}async function activateFreePlan(){const e=auth.currentUser;if(!e)return void alert("Please log in to activate a plan.");if(isFreePlanActive)return void alert("The Free Plan is already active.");const t=ALL_PLANS_DATA.free,n=t?t.hashRate:10,a=t?t.durationDays:15;if(confirm(`Are you sure you want to activate the Free Starter Plan (${n.toFixed(2)} MH/s) for ${a} days?`))try{const t=db.collection("users").doc(e.uid);await db.runTransaction((async e=>{const a=await e.get(t);if(!a.exists)throw"User data not found.";const i=a.data();if(i.isFreePlanActive)throw"Free Plan already active.";const o=(i.totalHashRate||0)+n,r=.05*o;e.update(t,{isFreePlanActive:!0,totalHashRate:o,estimatedDailyIncome:r,freePlanActivationDate:firebase.firestore.FieldValue.serverTimestamp(),lastMiningUpdate:firebase.firestore.FieldValue.serverTimestamp()}),isFreePlanActive=!0,totalHashRate=o,updateFreePlanUI(),document.getElementById("total-hash-rate").textContent=o.toFixed(2)+" MH/s",document.getElementById("estimated-daily-income").textContent="$"+r.toFixed(2),currentLocalBalance=i.balance||0,startRealTimeSimulation()})),alert(`Free Plan Activated Successfully! Your ${n.toFixed(2)} MH/s mining has started for ${a} days.`);const i=document.getElementById("free-plan-card");i.querySelector(".activated-badge")?.remove();const o=document.createElement("span");o.className="activated-badge",o.textContent="Activated",i.appendChild(o)}catch(e){console.error("Free Plan Activation Failed: ",e),alert("Error activating Free Plan. Please try again. Reason: "+(e.message||e))}}async function fetchAndRenderPlans(){try{const e=await db.collection("plans").get(),t={};e.forEach((e=>{t[e.id]=e.data()})),ALL_PLANS_DATA=t;const n={free:{hashRate:"free-hash-rate",price:"free-price",duration:"free-duration",earning:"free-earning"},bronze:{hashRate:"bronze-hash-rate",price:"bronze-price",duration:"bronze-duration",earning:"bronze-earning"},silver:{hashRate:"silver-hash-rate",price:"silver-price",duration:"silver-duration",earning:"silver-earning"},gold:{hashRate:"gold-hash-rate",price:"gold-price",duration:"gold-duration",earning:"gold-earning"}};for(const e in n){const a=t[e],i=n[e];if(a&&i){const t="free"===e?`$${a.price.toFixed(2)} (FREE)`:`$${a.price.toFixed(2)}`,n=`${a.durationDays} Days${"free"===e?" Trial":""}`;document.getElementById(i.hashRate).innerHTML=`Hash Rate: **${a.hashRate.toFixed(2)} MH/s**`,document.getElementById(i.price).innerHTML=`Price: **${t}**`,document.getElementById(i.duration).innerHTML=`Duration: **${n}**`,document.getElementById(i.earning).innerHTML=`Full Earning: **${a.fullEarningXRP.toFixed(2)} XRP**`}}}catch(e){console.error("Error fetching and rendering plans:",e);const t=document.getElementById("plans");t&&(t.innerHTML='<h2 class="section-title error-message" style="color: #d32f2f;">⚠️ Failed to load plans. Please check Firebase config and security rules.</h2>')}}function logout(){auth.signOut().then((()=>{stopRealTimeSimulation(),window.location.href="register.html"})).catch((e=>{console.error("Logout Error:",e)}))}function toggleNav(){document.getElementById("mySideMenu").classList.toggle("open")}function copyReferralLink(){const e=document.getElementById("referralLink"),t=document.getElementById("copy-feedback");e.select(),e.setSelectionRange(0,99999);try{navigator.clipboard.writeText(e.value),t.style.display="block",setTimeout((()=>{t.style.display="none"}),2e3)}catch(t){console.error("Could not copy text: ",t),alert("Could not copy link. Please manually copy: "+e.value)}}function goToPayment(e){const t=auth.currentUser,n=ALL_PLANS_DATA[e];if(!t)return void alert("Please log in before purchasing a plan.");if(!n)return void alert("Plan data not loaded yet, or invalid plan ID.");const a=e.toUpperCase(),i=n.price;window.location.href=`payment.html?planId=${e}&name=${encodeURIComponent(a)}&price=${i}`}function makeDraggable(e){let t=0,n=0,a=0,i=0,o=!1;function r(r){(r=r||window.event).preventDefault(),t=a-r.clientX,n=i-r.clientY,a=r.clientX,i=r.clientY,(Math.abs(t)>2||Math.abs(n)>2)&&(o=!0),e.style.top=e.offsetTop-n+"px",e.style.left=e.offsetLeft-t+"px"}function l(r){r=r||window.event,t=a-r.targetTouches[0].clientX,n=i-r.targetTouches[0].clientY,a=r.targetTouches[0].clientX,i=r.targetTouches[0].clientY,(Math.abs(t)>2||Math.abs(n)>2)&&(o=!0),e.style.top=e.offsetTop-n+"px",e.style.left=e.offsetLeft-t+"px"}function c(){document.onmouseup=null,document.onmousemove=null,document.ontouchend=null,document.ontouchmove=null,e.classList.remove("dragging"),setTimeout((()=>{o&&(o=!1)}),50)}e.onmousedown=function(t){(t=t||window.event).preventDefault(),a=t.clientX,i=t.clientY,e.classList.add("dragging"),document.onmouseup=c,document.onmousemove=r},e.ontouchstart=function(t){t=t||window.event,a=t.targetTouches[0].clientX,i=t.targetTouches[0].clientY,e.classList.add("dragging"),document.ontouchend=c,document.ontouchmove=l},e.onclick=function(e){o&&(e.preventDefault(),o=!1)}}auth.onAuthStateChanged((async e=>{if(!e)return stopRealTimeSimulation(),void(window.location.href="register.html");try{if(await e.reload(),!(e=auth.currentUser).emailVerified)return await auth.signOut(),void(window.location.href="register.html");await fetchAndRenderPlans();const t=db.collection("users").doc(e.uid);let n=await t.get(),a=n.data();if(!n.exists)return console.warn("User data not found in Firestore! Forcing logout."),void await auth.signOut();if(a.isFreePlanActive&&a.freePlanActivationDate){const e=ALL_PLANS_DATA.free,n=e?e.hashRate:10,i=e?e.durationDays:15,o=a.freePlanActivationDate.toDate().getTime()+24*i*60*60*1e3;if(Date.now()>o)return console.log("Free Plan Expired. Initiating deactivation and credit."),await calculateAndApplyMining(t,a),await db.runTransaction((async e=>{const i=(await e.get(t)).data();if(!i.isFreePlanActive)return;const o=Math.max(0,(i.totalHashRate||0)-n),r=.05*o;e.update(t,{isFreePlanActive:!1,totalHashRate:o,estimatedDailyIncome:r,freePlanActivationDate:firebase.firestore.FieldValue.delete(),lastMiningUpdate:firebase.firestore.FieldValue.serverTimestamp()}),a.isFreePlanActive=!1,a.totalHashRate=o,a.estimatedDailyIncome=r})),alert(`Your Free Plan (${n.toFixed(2)} MH/s) has expired after ${i} days. Your total earnings have been credited to your balance.`),void window.location.reload()}a.lastMiningUpdate||(await t.update({lastMiningUpdate:firebase.firestore.FieldValue.serverTimestamp()}),n=await t.get(),a=n.data()),await calculateAndApplyMining(t,a);const i=a.username||"Miner";document.getElementById("header-user-display-name").textContent=i,document.getElementById("hero-user-display-name").textContent=i,document.getElementById("side-user-display-name").textContent=i,document.getElementById("current-balance").textContent=(a.balance||0).toFixed(4)+" XRP",document.getElementById("total-hash-rate").textContent=(a.totalHashRate||0).toFixed(2)+" MH/s",document.getElementById("estimated-daily-income").textContent="$"+(a.estimatedDailyIncome||0).toFixed(2),document.getElementById("total-referrals").textContent=a.referrals||0,isFreePlanActive=a.isFreePlanActive||!1,totalHashRate=a.totalHashRate||0;const o=a.activePlans||[];document.querySelectorAll(".plan-container .plan-card").forEach((e=>{const t=e.querySelector("h3");if(!t)return;const n=t.textContent.toLowerCase().split("(")[0].trim().replace("elite ","").replace('<i class="fas fa-gift"></i>',"").trim();e.querySelector(".activated-badge")?.remove();let a=!1;if((n.includes("free")&&isFreePlanActive||o.includes(n))&&(a=!0),a){const t=document.createElement("span");t.className="activated-badge",t.textContent="Activated",e.appendChild(t)}n.includes("free")&&updateFreePlanUI()}));const r=document.getElementById("referralLink"),l=a.referralCode||e.uid.substring(0,8),c="https://xrp-mine-pro.pages.dev/register.html";r.value=`${c}?ref=${l}`,totalHashRate>0?(currentLocalBalance=a.balance||0,startRealTimeSimulation()):stopRealTimeSimulation()}catch(e){console.error("Error during authentication or data fetch:",e)}})),window.onload=function(){const e=document.getElementById("telegram-btn");e&&makeDraggable(e)}</script>